!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c,d){this._desired_speed=b,this._seek=new e(a,b),this._breaking_distance=c,this._ease=d||f.linear}var e=a("./Seek"),f=a("../utility/Easing"),g=(a("../math/Vec2"),.001);d.prototype={constructor:d,drive:function(a,b){b=b||1;var c=a.position.distance(this._seek.target);return g>c&&(c=0),c<=this._breaking_distance?this._seek.desired_speed=this._ease(0,this._desired_speed,c/this._breaking_distance):this._seek.desired_speed=this._desired_speed,this._seek.drive(a,b)},get target(){return this._seek.target},get desired_speed(){return this._desired_speed},set desired_speed(a){this._desired_speed=+a},get breaking_distance(){return this._breaking_distance},set breaking_distance(a){this._breaking_distance=+a}},b.exports=d},{"../math/Vec2":9,"../utility/Easing":11,"./Seek":4}],2:[function(a,b,c){function d(a,b){this._nearest_neighbours=a,this._attraction_weight=b}var e=a("../math/Vec2");d.prototype={constructor:d,drive:function(a,b){b=b||1;var c=new e(0,0),d=this._nearest_neighbours(a.position);return 1===d.length?a.velocity.scale(-a.mass/b):(d.forEach(function(a){c.add_(a.position)}),c.scale_(1/d.length),c.sub(a.position).scale_(this._attraction_weight(a.position.distance(c))))}},b.exports=d},{"../math/Vec2":9}],3:[function(a,b,c){function d(a,b,c,d){this._target=a,this._predict_position=d||f.constant(.1),this._seek=new e(a.position,b,c)}var e=a("./Seek"),f=a("../utility/Predictor");d.prototype={constructor:d,drive:function(a,b){return b=b||1,this._seek.target.copy_(this._predict_position(this._target)),this._seek.drive(a,b)},get target(){return this._target},set target(a){this._target=a},get desired_speed(){return this._seek.desired_speed},set desired_speed(a){this._seek.desired_speed=a},get evasion(){return this._seek.flee},set evasion(a){this._seek.flee=a},get predictor(){return this._predict_position},set predictor(a){this._predict_position=a}},b.exports=d},{"../utility/Predictor":12,"./Seek":4}],4:[function(a,b,c){function d(a,b,c){this._target=a.clone(),this._desired_speed=b,this._flee=c||!1}d.prototype={constructor:d,drive:function(a,b){b=b||1;var c=this._target.sub(a.position).unit_().scale_(this._desired_speed);return this._flee&&c.scale_(-1),c.sub(a.velocity).scale_(a.mass/b)},get target(){return this._target},get desired_speed(){return this._desired_speed},set desired_speed(a){this._desired_speed=+a},get flee(){return this._flee},set flee(a){this._flee=!!a}},b.exports=d},{}],5:[function(a,b,c){function d(a,b){this._nearest_neighbours=a,this._repulsion_weight=b}var e=a("../math/Vec2");d.prototype={constructor:d,drive:function(a,b){b=b||1;var c=this._nearest_neighbours(a.position);if(1===c.length)return a.velocity.scale(-a.mass/b);var d=new e(0,0);return c.forEach(function(b){var c=a.position.sub(b.position).unit_().scale_(this._repulsion_weight(a.position.distance(b.position)));d.add_(c)},this),d}},b.exports=d},{"../math/Vec2":9}],6:[function(a,b,c){function d(a,b,c){this._max_turn=Math.abs(a),this._max_turn_rate=Math.abs(b),this._speed=c,this._current_angle=0}function e(a,b){return a+(b-a)*Math.random()}var f=a("../math/Vec2"),g=new f(1,0);d.prototype={constructor:d,drive:function(a,b){b=b||1,this._current_angle+=e(-this._max_turn_rate,this._max_turn_rate),this._current_angle=Math.min(this._max_turn,Math.max(-this._max_turn,this._current_angle));var c;return c=g.rotate(a.orientation+this._current_angle),c.scale_(this._speed*a.mass/b),c},get max_turn(){return this._max_turn},set max_turn(a){this._max_turn=Math.abs(+a)},get max_turn_rate(){return this._max_turn_rate},set max_turn_rate(a){this._max_turn_rate=Math.abs(+a)},get speed(){return this._speed},set speed(a){this._speed=+a}},b.exports=d},{"../math/Vec2":9}],7:[function(a,b,c){function d(a){if("undefined"==typeof a)a=h;else for(var b in h)h.hasOwnProperty(b)&&!a.hasOwnProperty(b)&&(a[b]=h[b]);this._mass=a.mass,this._mass_inverse=1/this._mass,this._position=a.position.clone(),this._orientation=a.orientation,this._velocity=a.velocity.clone(),this._max_force=a.max_force,this._max_speed=a.max_speed,this._net_force=new f(0,0)}function e(a,b){var c=a.len();return c>b&&a.scale_(b/c),a}var f=a("../math/Vec2"),g=new f(1,0),h={mass:1,position:new f(0,0),orientation:0,velocity:new f(0,0),max_force:1,max_speed:1};d.prototype={constructor:d,apply_force:function(a){this._net_force.add_(a)},step:function(a){var b;e(this._net_force,this._max_force),b=this._net_force.scale(this._mass_inverse*a),this._velocity.add_(b),e(this._velocity,this._max_speed),this._position.add_(this._velocity.scale(a)),this._velocity.len2()>0&&(this._orientation=g.signed_angle(this._velocity))},get mass(){return this._mass},set mass(a){this._mass=+a,this._mass_inverse=1/this._mass},get position(){return this._position},get orientation(){return this._orientation},get velocity(){return this._velocity},get max_force(){return this._max_force},set max_force(a){this._max_force=+a},get max_speed(){return this._max_speed},set max_speed(a){this._max_speed=+a},get net_force(){return this._net_force}},b.exports=d},{"../math/Vec2":9}],8:[function(a,b,c){var d={Arrival:a("./behaviors/Arrival"),Cohesion:a("./behaviors/Cohesion"),Pursuit:a("./behaviors/Pursuit"),Seek:a("./behaviors/Seek"),Separation:a("./behaviors/Separation"),Wander:a("./behaviors/Wander")},e=a("./core/Character"),f=a("./math/Vec2"),g={NaiveNearestNeighbour:a("./spatial/NaiveNearestNeighbour")},h=a("./utility/Easing"),i=a("./utility/Predictor"),j={Behavior:d,Character:e,Vec2:f,Spatial:g,Easing:h,Predictor:i};b.exports=j,"undefined"!=typeof window&&(window.SB=j)},{"./behaviors/Arrival":1,"./behaviors/Cohesion":2,"./behaviors/Pursuit":3,"./behaviors/Seek":4,"./behaviors/Separation":5,"./behaviors/Wander":6,"./core/Character":7,"./math/Vec2":9,"./spatial/NaiveNearestNeighbour":10,"./utility/Easing":11,"./utility/Predictor":12}],9:[function(a,b,c){function d(a,b){this._x=a,this._y=b}d.prototype={constructor:d,add:function(a){return new d(this._x+a._x,this._y+a._y)},add_:function(a){return this._x+=a._x,this._y+=a._y,this},sub:function(a){return new d(this._x-a._x,this._y-a._y)},sub_:function(a){return this._x-=a._x,this._y-=a._y,this},mul:function(a){return new d(this._x*a._x,this._y*a._y)},mul_:function(a){return this._x*=a._x,this._y*=a._y,this},rotate:function(a){var b=Math.sin(a),c=Math.cos(a);return new d(this._x*c-this._y*b,this._x*b+this._y*c)},rotate_:function(a){var b=Math.sin(a),c=Math.cos(a),d=this._x;return this._x=d*c-this._y*b,this._y=d*b+this._y*c,this},scale:function(a){return new d(this._x*a,this._y*a)},scale_:function(a){return this._x*=a,this._y*=a,this},len2:function(){return this.dot(this)},len:function(){return Math.sqrt(this.len2())},distance2:function(a){return this.sub(a).len2()},distance:function(a){return Math.sqrt(this.distance2(a))},unit:function(){var a=this.len();return a=a>0?a:1,this.scale(1/a)},unit_:function(){var a=this.len();return a=a>0?a:1,this.scale_(1/a)},clone:function(){return new d(this._x,this._y)},copy_:function(a){return this._x=a._x,this._y=a._y,this},dot:function(a){return this._x*a._x+this._y*a._y},cross:function(a){return this._x*a._y-this._y*a._x},angle:function(a){return Math.acos(this.dot(a)/(this.len()*a.len()))},signed_angle:function(a){return Math.atan2(this.cross(a),this.dot(a))},map:function(a){return new d(a(this._x),a(this._y))},map_:function(a){return this._x=a(this._x),this._y=a(this._y),this},set:function(a,b){return this._x=a,this._y=b,this},get x(){return this._x},set x(a){this._x=+a},get y(){return this._y},set y(a){this._y=+a},toString:function(){return"Vec2("+this._x+", "+this._y+")"}},b.exports=d},{}],10:[function(a,b,c){function d(){this._sites={}}d.prototype={constructor:d,set:function(a,b){this._sites[a]=b},remove:function(a){delete this._sites[a]},query_fixed_radius:function(a,b){var c=[];for(var d in this._sites)this._sites.hasOwnProperty(d)&&this._sites[d].distance(a)<=b&&c.push(d);return c}},b.exports=d},{}],11:[function(a,b,c){b.exports={linear:function(a,b,c){return a*(1-c)+b*c}}},{}],12:[function(a,b,c){function d(a,b,c){return a.add(b.scale(c))}b.exports={constant:function(a){return function(b){return d(b.position,b.velocity,a)}},distance_based:function(a,b){return function(c){var e=a.position.distance(c.position)*b;return d(c.position,c.velocity,e)}}}},{}]},{},[8]);